ARM GAS  /tmp/ccP7o77M.s 			page 1


   1              		.cpu cortex-m7
   2              		.arch armv7e-m
   3              		.fpu fpv5-d16
   4              		.eabi_attribute 28, 1
   5              		.eabi_attribute 20, 1
   6              		.eabi_attribute 21, 1
   7              		.eabi_attribute 23, 3
   8              		.eabi_attribute 24, 1
   9              		.eabi_attribute 25, 1
  10              		.eabi_attribute 26, 1
  11              		.eabi_attribute 30, 1
  12              		.eabi_attribute 34, 1
  13              		.eabi_attribute 18, 4
  14              		.file	"main.c"
  15              		.text
  16              	.Ltext0:
  17              		.cfi_sections	.debug_frame
  18              		.file 1 "main.c"
  19              		.section	.text.main,"ax",%progbits
  20              		.align	1
  21              		.global	main
  22              		.syntax unified
  23              		.thumb
  24              		.thumb_func
  26              	main:
  27              	.LFB144:
   1:main.c        **** /*******************************************************************************
   2:main.c        **** *
   3:main.c        **** * FILE: 
   4:main.c        **** *       main.c
   5:main.c        **** *
   6:main.c        **** * DESCRIPTION: 
   7:main.c        **** *		Pings another XBee module and indicates to PC when a ping code has 
   8:main.c        **** *       received. Used to perform range testing and bidirectional communcation
   9:main.c        **** *       testing.	
  10:main.c        **** *
  11:main.c        **** *******************************************************************************/
  12:main.c        **** 
  13:main.c        **** 
  14:main.c        **** /*------------------------------------------------------------------------------
  15:main.c        **** Standard Includes                                                                     
  16:main.c        **** ------------------------------------------------------------------------------*/
  17:main.c        **** 
  18:main.c        **** 
  19:main.c        **** /*------------------------------------------------------------------------------
  20:main.c        **** Project Includes                                                                     
  21:main.c        **** ------------------------------------------------------------------------------*/
  22:main.c        **** 
  23:main.c        **** /* Pin definitions, main prototypes, error codes */
  24:main.c        **** #include "main.h"
  25:main.c        **** #include "init.h"
  26:main.c        **** #include "sdr_pin_defines_A0005.h"
  27:main.c        **** #include "sdr_error.h"
  28:main.c        **** 
  29:main.c        **** /* SDR Modules */
  30:main.c        **** #include "commands.h"
  31:main.c        **** #include "led.h"
ARM GAS  /tmp/ccP7o77M.s 			page 2


  32:main.c        **** #include "usb.h"
  33:main.c        **** #include "wireless.h"
  34:main.c        **** 
  35:main.c        **** 
  36:main.c        **** /*------------------------------------------------------------------------------
  37:main.c        **** Global Variables                                                                  
  38:main.c        **** ------------------------------------------------------------------------------*/
  39:main.c        **** 
  40:main.c        **** /* MCU Peripheral handles */
  41:main.c        **** UART_HandleTypeDef huart4; /* Xbee UART */
  42:main.c        **** UART_HandleTypeDef huart1; /* USB UART  */
  43:main.c        **** 
  44:main.c        **** 
  45:main.c        **** /*------------------------------------------------------------------------------
  46:main.c        **** Application entry point                                                      
  47:main.c        **** ------------------------------------------------------------------------------*/
  48:main.c        **** int main
  49:main.c        **** 	(
  50:main.c        **** 	void
  51:main.c        **** 	)
  52:main.c        **** {
  28              		.loc 1 52 1 view -0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 8
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32 0000 00B5     		push	{lr}
  33              	.LCFI0:
  34              		.cfi_def_cfa_offset 4
  35              		.cfi_offset 14, -4
  36 0002 83B0     		sub	sp, sp, #12
  37              	.LCFI1:
  38              		.cfi_def_cfa_offset 16
  53:main.c        **** /*------------------------------------------------------------------------------
  54:main.c        ****  Local Variables 
  55:main.c        **** ------------------------------------------------------------------------------*/
  56:main.c        **** uint8_t    rx_byte;     /* Byte recieved from Wireless module */
  39              		.loc 1 56 1 view .LVU1
  57:main.c        **** USB_STATUS usb_status;  /* Status of USB module               */
  40              		.loc 1 57 1 view .LVU2
  58:main.c        **** RF_STATUS  rf_status;   /* Status of wireless module          */
  41              		.loc 1 58 1 view .LVU3
  59:main.c        **** 
  60:main.c        **** 
  61:main.c        **** /*------------------------------------------------------------------------------
  62:main.c        ****  Initializations                                                             
  63:main.c        **** ------------------------------------------------------------------------------*/
  64:main.c        **** rx_byte = 0;
  42              		.loc 1 64 1 view .LVU4
  43              		.loc 1 64 9 is_stmt 0 view .LVU5
  44 0004 0023     		movs	r3, #0
  45 0006 8DF80730 		strb	r3, [sp, #7]
  65:main.c        **** 
  66:main.c        **** 
  67:main.c        **** /*------------------------------------------------------------------------------
  68:main.c        ****  MCU Initialization                                                             
  69:main.c        **** ------------------------------------------------------------------------------*/
  70:main.c        **** HAL_Init          ();   /* CMSIS HAL */
ARM GAS  /tmp/ccP7o77M.s 			page 3


  46              		.loc 1 70 1 is_stmt 1 view .LVU6
  47 000a FFF7FEFF 		bl	HAL_Init
  48              	.LVL0:
  71:main.c        **** SystemClock_Config();   /* SysClock  */
  49              		.loc 1 71 1 view .LVU7
  50 000e FFF7FEFF 		bl	SystemClock_Config
  51              	.LVL1:
  72:main.c        **** GPIO_Init         ();   /* GPIO Pins */
  52              		.loc 1 72 1 view .LVU8
  53 0012 FFF7FEFF 		bl	GPIO_Init
  54              	.LVL2:
  73:main.c        **** XBee_UART_Init    ();   /* XBee      */
  55              		.loc 1 73 1 view .LVU9
  56 0016 FFF7FEFF 		bl	XBee_UART_Init
  57              	.LVL3:
  74:main.c        **** USB_UART_Init     ();   /* USB       */
  58              		.loc 1 74 1 view .LVU10
  59 001a FFF7FEFF 		bl	USB_UART_Init
  60              	.LVL4:
  61 001e 09E0     		b	.L2
  62              	.LVL5:
  63              	.L3:
  75:main.c        **** 
  76:main.c        **** 
  77:main.c        **** /*------------------------------------------------------------------------------
  78:main.c        ****  Event Loop                                                                  
  79:main.c        **** ------------------------------------------------------------------------------*/
  80:main.c        **** while (1)
  81:main.c        **** 	{
  82:main.c        **** 	/* Poll the wireless module for incoming data */
  83:main.c        **** 	rf_status = rf_xbee_receive_byte( &rx_byte ); 
  84:main.c        **** 
  85:main.c        **** 	/* Received byte */
  86:main.c        **** 	if ( rf_status != RF_TIMEOUT )
  87:main.c        **** 		{
  88:main.c        **** 		/* Correct byte? */
  89:main.c        **** 		if ( rx_byte != PING_OP )
  90:main.c        **** 			{
  91:main.c        **** 			Error_Handler( ERROR_RF_UNRECOGNIZED_PING );
  92:main.c        **** 			}
  93:main.c        **** 
  94:main.c        **** 		/* Send a ping to the other wireless module */
  95:main.c        **** 		rf_xbee_transmit_byte( PING_OP );
  64              		.loc 1 95 3 view .LVU11
  65 0020 0120     		movs	r0, #1
  66 0022 FFF7FEFF 		bl	rf_xbee_transmit_byte
  67              	.LVL6:
  96:main.c        **** 
  97:main.c        **** 		/* Tell PC a ping has been received */
  98:main.c        **** 	    usb_status = usb_transmit( &rx_byte         , 
  68              		.loc 1 98 6 view .LVU12
  69              		.loc 1 98 19 is_stmt 0 view .LVU13
  70 0026 0122     		movs	r2, #1
  71 0028 1146     		mov	r1, r2
  72 002a 0DF10700 		add	r0, sp, #7
  73 002e FFF7FEFF 		bl	usb_transmit
  74              	.LVL7:
ARM GAS  /tmp/ccP7o77M.s 			page 4


  99:main.c        ****                                    sizeof( uint8_t ),
 100:main.c        ****                                    HAL_DEFAULT_TIMEOUT  );
 101:main.c        **** 		if ( usb_status != USB_OK )
  75              		.loc 1 101 3 is_stmt 1 view .LVU14
  76              		.loc 1 101 6 is_stmt 0 view .LVU15
  77 0032 68B9     		cbnz	r0, .L7
  78              	.LVL8:
  79              	.L2:
  80:main.c        **** 	{
  80              		.loc 1 80 1 is_stmt 1 view .LVU16
  83:main.c        **** 
  81              		.loc 1 83 2 view .LVU17
  83:main.c        **** 
  82              		.loc 1 83 14 is_stmt 0 view .LVU18
  83 0034 0DF10700 		add	r0, sp, #7
  84 0038 FFF7FEFF 		bl	rf_xbee_receive_byte
  85              	.LVL9:
  86:main.c        **** 		{
  86              		.loc 1 86 2 is_stmt 1 view .LVU19
  86:main.c        **** 		{
  87              		.loc 1 86 5 is_stmt 0 view .LVU20
  88 003c 0128     		cmp	r0, #1
  89 003e F9D0     		beq	.L2
  89:main.c        **** 			{
  90              		.loc 1 89 3 is_stmt 1 view .LVU21
  89:main.c        **** 			{
  91              		.loc 1 89 16 is_stmt 0 view .LVU22
  92 0040 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
  89:main.c        **** 			{
  93              		.loc 1 89 6 view .LVU23
  94 0044 012B     		cmp	r3, #1
  95 0046 EBD0     		beq	.L3
  91:main.c        **** 			}
  96              		.loc 1 91 4 is_stmt 1 view .LVU24
  97 0048 1620     		movs	r0, #22
  98              	.LVL10:
  91:main.c        **** 			}
  99              		.loc 1 91 4 is_stmt 0 view .LVU25
 100 004a FFF7FEFF 		bl	Error_Handler
 101              	.LVL11:
 102 004e E7E7     		b	.L3
 103              	.LVL12:
 104              	.L7:
 102:main.c        **** 			{
 103:main.c        **** 			Error_Handler( ERROR_USB_UART_ERROR );
 105              		.loc 1 103 4 is_stmt 1 view .LVU26
 106 0050 1720     		movs	r0, #23
 107              	.LVL13:
 108              		.loc 1 103 4 is_stmt 0 view .LVU27
 109 0052 FFF7FEFF 		bl	Error_Handler
 110              	.LVL14:
 111 0056 EDE7     		b	.L2
 112              		.cfi_endproc
 113              	.LFE144:
 115              		.global	huart1
 116              		.section	.bss.huart1,"aw",%nobits
 117              		.align	2
ARM GAS  /tmp/ccP7o77M.s 			page 5


 120              	huart1:
 121 0000 00000000 		.space	144
 121      00000000 
 121      00000000 
 121      00000000 
 121      00000000 
 122              		.global	huart4
 123              		.section	.bss.huart4,"aw",%nobits
 124              		.align	2
 127              	huart4:
 128 0000 00000000 		.space	144
 128      00000000 
 128      00000000 
 128      00000000 
 128      00000000 
 129              		.text
 130              	.Letext0:
 131              		.file 2 "/usr/arm-none-eabi/include/machine/_default_types.h"
 132              		.file 3 "/usr/arm-none-eabi/include/sys/_stdint.h"
 133              		.file 4 "../../../lib/Drivers/CMSIS/Device/ST/STM32H7xx/Include/stm32h750xx.h"
 134              		.file 5 "/usr/lib/gcc/arm-none-eabi/12.2.0/include/stddef.h"
 135              		.file 6 "../../../lib/Drivers/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_def.h"
 136              		.file 7 "../../../lib/Drivers/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_dma.h"
 137              		.file 8 "../../../lib/Drivers/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_uart.h"
 138              		.file 9 "../../../lib/util/sdr_error.h"
 139              		.file 10 "../../../lib/sdr_pin_defines_A0005.h"
 140              		.file 11 "../../../mod/usb/usb.h"
 141              		.file 12 "../../../mod/wireless/wireless.h"
 142              		.file 13 "../../../init/init.h"
 143              		.file 14 "main.h"
 144              		.file 15 "../../../lib/Drivers/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal.h"
ARM GAS  /tmp/ccP7o77M.s 			page 6


DEFINED SYMBOLS
                            *ABS*:0000000000000000 main.c
     /tmp/ccP7o77M.s:20     .text.main:0000000000000000 $t
     /tmp/ccP7o77M.s:26     .text.main:0000000000000000 main
     /tmp/ccP7o77M.s:120    .bss.huart1:0000000000000000 huart1
     /tmp/ccP7o77M.s:117    .bss.huart1:0000000000000000 $d
     /tmp/ccP7o77M.s:127    .bss.huart4:0000000000000000 huart4
     /tmp/ccP7o77M.s:124    .bss.huart4:0000000000000000 $d

UNDEFINED SYMBOLS
HAL_Init
SystemClock_Config
GPIO_Init
XBee_UART_Init
USB_UART_Init
rf_xbee_transmit_byte
usb_transmit
rf_xbee_receive_byte
Error_Handler
